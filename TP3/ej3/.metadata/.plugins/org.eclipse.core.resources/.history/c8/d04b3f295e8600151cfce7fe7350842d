import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Random;
import java.util.Set;

public class Escritor {
	
	public Escritor(String archiveIn) throws Exception 
	{
	     try{ this.os = new BufferedWriter( new FileWriter( getClass().getResource( "" ).getPath() + archiveIn) );}
	     catch (RuntimeException e) {throw new Exception ("Error al escribir el archivo");}
	}
	
	public void EscribirLinea (String linea) throws Exception
	{
		try {this.os.write(linea);}
		catch (IOException e) {throw new Exception ("No se pudo escribir linea");}

	}
	
	BufferedWriter os;
	
	public void PrintNewNode(int cantTotalColores) throws Exception
	{
		Random numero = new Random();
		int cantColores = 1 + numero.nextInt(cantTotalColores);
		StringBuilder colores = new StringBuilder();
		colores.append(String.valueOf(cantColores) + " ");
		Set<Integer> conjColores = new HashSet<Integer>();
		while(conjColores.size() != cantColores)
			conjColores.add(1 + numero.nextInt(cantColores));
		Iterator<Integer> iterador = conjColores.iterator();
		
		while(iterador.hasNext())
			colores.append(String.valueOf(iterador.next()) + " ");
		
		this.EscribirLinea(cantColores + " " + colores);
	}

    public void EscribirString(String s) throws Exception
	{
		try {this.os.write(s);}
		catch (IOException e) {throw new Exception ("No se pudo escribir el valor");}
	}
	/*
	public void NuevaLinea() throws Exception
	{
		try {this.os.newLine();}
		catch (IOException e) {throw new Exception ("No se pudo escribir una nueva linea");}
	}
	
	public void Append(String stuff) throws Exception
	{
		try {this.os.append(stuff);}
		catch (IOException e) {throw new Exception ("No se pudo escribir");}
	}
	
	public void Append(int num) throws Exception
	{
		try {this.os.append(Integer.toString(num) + " ");}
		catch (IOException e) {throw new Exception ("No se pudo escribir el numero");}
	}
    
	public void Fin() throws IOException
	{
		this.os.close();
	}
	
	public void escribirArista(Arista arista) throws Exception 
	{
		try 
		{
			this.os.append(String.valueOf(arista.pisoDesde));
			this.os.write(" ");
			this.os.append(String.valueOf(arista.distanciaDesde));
			this.os.write(" ");
			this.os.append(String.valueOf(arista.pisoHasta));
			this.os.write(" ");
			this.os.append(String.valueOf(arista.distanciaHasta));
			this.os.write(";");
		} 
		catch (IOException e) { throw new Exception ("No se pudo escribir arista");}
	}
	
	*/
	public void GenerateAndPrintAristas(int cantAristas, int cantNodos) 
	{
		HashSet<Arista> aristas = GenerarAristas(cantAristas, cantNodos);
		ImprimirAristas(aristas.iterator());
	}

	private void ImprimirAristas(Iterator<Arista> iterator) 
	{
		// TODO Auto-generated method stub
		
	}

	private HashSet<Arista> GenerarAristas(int cantAristas, int cantNodos) 
	{
		HashSet<Arista> aristas = new HashSet<Arista>();
		Random random = new Random();
		while (aristas.size() < cantAristas)
			aristas.add(new Arista(random.nextInt(cantNodos),random.nextInt(cantNodos)));
		return aristas;
	}
}
